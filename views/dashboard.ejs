<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard - Spent Tracker</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-light">

<div class="container mt-5">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Dashboard</h2>
    <a href="/" class="btn btn-secondary">Logout</a>
  </div>

  <div class="card p-3 mb-4">
    <canvas id="categoryChart" style="max-width:600px;"></canvas>
  </div>

  <div class="card p-3">
    <h4>Categories Summary</h4>
    <table class="table table-striped">
      <thead>
        <tr><th>Category</th><th>Total (â‚¬)</th></tr>
      </thead>
      <tbody>
        <% data.forEach(d => { %>
          <tr>
            <td><%= d.category %></td>
            <td><%= d.total %></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<script>
const ctx = document.getElementById('categoryChart').getContext('2d');
const chart = new Chart(ctx, {
    type: 'pie',
    data: {
        labels: [<%= data.map(d=>`'${d.category}'`).join(',') %>],
        datasets: [{
            label: 'Expenses',
            data: [<%= data.map(d=>d.total).join(',') %>],
            backgroundColor: ['#007bff','#28a745','#dc3545','#ffc107','#17a2b8'],
        }]
    }
});
</script>

</body>
</html>
